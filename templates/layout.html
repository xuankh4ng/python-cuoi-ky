{% load static %}
<!doctype html>
<html lang="vi">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %}</title>

    <!-- Fonts & Bootstrap -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/layout.css' %}" />
    <link rel="stylesheet" href="{% static 'css/store-list.css' %}" />
    <link rel="stylesheet" href="{% static 'css/store-detail.css' %}" />
    <link rel="stylesheet" href="{% static 'css/auth.css' %}" />
    <link rel="stylesheet" href="{% static 'css/cart-detail.css' %}" />

    <style>
      /* Body flex để footer luôn dính đáy */
      html, body {
          height: 100%;
      }
      body {
          display: flex;
          flex-direction: column;
          min-height: 100vh;
      }
      main.container {
          flex: 1; /* chiếm không gian còn lại */
      }
    </style>
  </head>
  <body>
    <header>
      <nav class="navbar">
        <a class="navbar-brand m-0 fs-2" href="{% url 'book_list' %}">BookHub</a>

        <div class="d-flex align-items-center gap-2">
          <a href="{% if user.is_authenticated %}{% url 'cart_detail' %}{% else %}{% url 'login' %}{% endif %}" 
             class="btn cart-btn">
              <i class="bi bi-cart3"></i>
              {% if cart_item_count > 0 %}
                  {{ cart_item_count }}
              {% endif %}
          </a>
          <div class="ms-3">
              {% if user.is_authenticated %}
              <div class="dropdown">
                  <button class="btn btn-ev-login dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class="bi bi-person me-1"></i>
                      {{ user.username }}
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end">
                      <li>
                          <a class="dropdown-item" href="{% url 'profile_view' %}">
                              <i class="bi bi-person-circle"></i> Thông tin cá nhân
                          </a>
                      </li>
                      <li>
                          <a class="dropdown-item" href="{% url 'order_history' %}">
                              <i class="bi bi-cart"></i> Lịch sử đơn hàng
                          </a>
                      </li>
                      <li>
                          <a class="dropdown-item" href="{% url 'logout' %}">
                              <i class="bi bi-box-arrow-right"></i> Đăng xuất
                          </a>
                      </li>
                  </ul>
              </div>
              {% else %}
              <a href="{% url 'login' %}" class="btn btn-ev-login">Đăng nhập</a>
              {% endif %}
          </div>
        </div>
      </nav>
    </header>

    <main class="container my-4">
      {% block content %} 
      {% endblock %}
    </main>

    <footer class="footer p-3 text-center mt-5">
      &copy; 2025 Đồ án Python - Nhóm 5
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
    <script src="{% static 'js/layout.js' %}"> </script>
  </body>
</html>
